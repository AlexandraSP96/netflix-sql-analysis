-- Criar a base de dados --

CREATE DATABASE Netflix;

USE Netflix; 

-- Agora vou criar a tabela de dados_brutos, a inserção dos dados não vou colocar devido ao espaço que ocupa--

CREATE TABLE mytable(
   netflix_titles VARCHAR(7) NOT NULL PRIMARY KEY
  ,FIELD2         VARCHAR(7) NOT NULL
  ,FIELD3         VARCHAR(104) NOT NULL
  ,FIELD4         VARCHAR(208)
  ,FIELD5         VARCHAR(771)
  ,FIELD6         VARCHAR(123)
  ,FIELD7         VARCHAR(18)
  ,FIELD8         VARCHAR(12) NOT NULL
  ,FIELD9         VARCHAR(8)
  ,FIELD10        VARCHAR(10)
  ,FIELD11        VARCHAR(79) NOT NULL
  ,FIELD12        VARCHAR(248) NOT NULL
  );
  
  -- Quero alterar o nome da tabela --

RENAME TABLE mytable TO Netflix_Dados_Brutos;

-- Vou alterar as informações das colunas --

ALTER TABLE Netflix_Dados_Brutos
CHANGE COLUMN netflix_titles show_id VARCHAR(7),
CHANGE COLUMN FIELD2 type VARCHAR(7) NOT NULL,
CHANGE COLUMN FIELD3 title VARCHAR(255) NOT NULL,
CHANGE COLUMN FIELD4 director VARCHAR(255),
CHANGE COLUMN FIELD5 cast TEXT,
CHANGE COLUMN FIELD6 country VARCHAR(255),
CHANGE COLUMN FIELD7 date_added VARCHAR(255),
CHANGE COLUMN FIELD8 release_year VARCHAR(255) NOT NULL,
CHANGE COLUMN FIELD9 rating VARCHAR(255),
CHANGE COLUMN FIELD10 duration VARCHAR(255),
CHANGE COLUMN FIELD11 listed_in VARCHAR(255) NOT NULL,
CHANGE COLUMN FIELD12 description TEXT NOT NULL;

-- Iniciar a criação das tabelas limpas --

CREATE TABLE Movies(
	id_movie VARCHAR(7) PRIMARY KEY,
    type VARCHAR(7) NOT NULL,
    title VARCHAR(255) NOT NULL,
    date_added VARCHAR(50) NULL,
    release_year INT NULL,
    rating VARCHAR(255),
    duration VARCHAR(255),
    description TEXT
);

CREATE TABLE Director(
	id_director INT PRIMARY KEY AUTO_INCREMENT,
    director_name TEXT NOT NULL
);

CREATE TABLE Cast (
	id_cast INT PRIMARY KEY AUTO_INCREMENT,
    actor_name TEXT NOT NULL
);

CREATE TABLE Genres(
	id_genre INT PRIMARY KEY AUTO_INCREMENT,
	genre_name TEXT NOT NULL
);

CREATE TABLE Country(
	id_country INT PRIMARY KEY AUTO_INCREMENT,
    country_name TEXT NOT NULL
);

CREATE TABLE Director_Movies(
	id_director_movies INT PRIMARY KEY AUTO_INCREMENT,
    id_movie VARCHAR(7) NOT NULL,
    id_director INT NOT NULL,
    FOREIGN KEY (id_movie) REFERENCES Movies(id_movie) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (id_director) REFERENCES Director(id_director) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Cast_Movies(
	id_cast_movies INT PRIMARY KEY AUTO_INCREMENT, 
    id_movie VARCHAR(7) NOT NULL,
    id_cast INT NOT NULL,
    FOREIGN KEY (id_movie) REFERENCES Movies(id_movie) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (id_cast) REFERENCES Cast (id_cast) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Genres_Movies(
	id_genres_movies INT PRIMARY KEY AUTO_INCREMENT,
    id_movie VARCHAR(7) NOT NULL,
    id_genre INT NOT NULL,
    FOREIGN KEY (id_movie) REFERENCES Movies(id_movie) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (id_genre) REFERENCES Genres(id_genre) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Country_Movies(
	id_country_movies INT PRIMARY KEY AUTO_INCREMENT, 
    id_movie VARCHAR(7) NOT NULL,
    id_country INT NOT NULL,
    FOREIGN KEY (id_movie) REFERENCES Movies(id_movie) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (id_country) REFERENCES Country(id_country) ON DELETE CASCADE ON UPDATE CASCADE
);


    





    
    

































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































	





    

